<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MusicViz - Audio Visualization</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading" class="loading-screen">
            <div class="loading-spinner"></div>
            <p>Initializing MusicViz...</p>
        </div>

        <!-- Main Interface -->
        <main id="main-interface" class="main-interface">
            <header class="header">
                <h1 class="logo">
                    <span class="logo-icon">üéµ</span>
                    MusicViz
                </h1>
                <div class="controls">
                    <button id="visualizer-toggle" class="control-btn" title="Toggle 2D/3D">
                        <span id="viz-mode-text">2D</span>
                    </button>
                    <button id="fullscreen-btn" class="control-btn" title="Fullscreen">
                        <span>‚õ∂</span>
                    </button>
                </div>
            </header>

            <div class="input-container">
                <div class="input-section">
                    <h2>Choose Your Music</h2>
                    
                    <!-- File Upload -->
                    <div class="input-group">
                        <label for="audio-file" class="upload-label">
                            <span class="upload-icon">üìÅ</span>
                            <span class="upload-text">Upload Audio File</span>
                            <span class="upload-hint">MP3, WAV, M4A</span>
                        </label>
                        <input type="file" id="audio-file" accept=".mp3,.wav,.m4a,.ogg" hidden>
                    </div>

                    <div class="divider">
                        <span>or</span>
                    </div>

                    <!-- URL Input -->
                    <div class="input-group">
                        <input 
                            type="url" 
                            id="music-url" 
                            placeholder="Paste music URL (SoundCloud, YouTube, Spotify, Apple Music)"
                            class="url-input"
                        >
                        <button id="load-url" class="load-btn">Load</button>
                    </div>

                    <div class="service-icons">
                        <span class="service-icon" title="SoundCloud">üü†</span>
                        <span class="service-icon" title="YouTube">üî¥</span>
                        <span class="service-icon" title="Spotify">üü¢</span>
                        <span class="service-icon" title="Apple Music">‚ö™</span>
                    </div>
                </div>

                <!-- Audio Controls -->
                <div id="audio-controls" class="audio-controls hidden">
                    <div class="track-info">
                        <div class="track-title" id="track-title">Track Name</div>
                        <div class="track-artist" id="track-artist">Artist</div>
                    </div>
                    
                    <div class="playback-controls">
                        <button id="play-pause" class="control-btn primary">
                            <span id="play-icon">‚ñ∂</span>
                        </button>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill"></div>
                            </div>
                            <div class="time-display">
                                <span id="current-time">0:00</span>
                                <span id="duration">0:00</span>
                            </div>
                        </div>
                        <div class="volume-control">
                            <span class="volume-icon">üîä</span>
                            <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.8">
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Visualizer Container -->
        <div id="visualizer-container" class="visualizer-container hidden">
            <canvas id="canvas-2d" class="visualizer-canvas"></canvas>
            <div id="three-container" class="visualizer-canvas"></div>
            
            <div class="visualizer-overlay">
                <button id="back-btn" class="overlay-btn">
                    <span>‚Üê Back</span>
                </button>
                <div class="visualizer-info">
                    <span id="current-mode">2D Mode</span>
                    <button id="mode-switch" class="overlay-btn">
                        Switch to 3D
                    </button>
                </div>
            </div>
        </div>

        <!-- Error Messages -->
        <div id="error-toast" class="toast hidden">
            <span id="error-message"></span>
            <button id="close-error" class="close-btn">√ó</button>
        </div>
    </div>

    <!-- Audio Element -->
    <audio id="audio-player" crossorigin="anonymous"></audio>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/audio-analyzer.js"></script>
    <script src="js/visualizer-2d.js"></script>
    <script src="js/visualizer-3d.js"></script>
    <script src="js/streaming-services.js"></script>
    <script src="js/ai-integration.js"></script>
    <script src="js/main.js"></script>
</body>
</html>